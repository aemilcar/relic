{% extends "template.html" %}
{% load gravatar %}
{% block javascript_head %}
<script language='javascript'>
    /*
    Handle message box
    */
    $(document).ready(function(){
        if ($("#message").text().length < 1) {
            $("#message").hide();
        } else {
            $("#message").fadeOut(10000, function(){ 
                $("#message").remove()
            });
        }
    });
    
    /*
    Show only Settings when loading the page
    */
    $(document).ready(function(){
        $("#settings").show();
        $("#picture").hide();
    });
    
    /*
    Hide all content
    */
    function hideAll(){
        $("#settings").hide();
        $("#picture").hide();
    }
</script>
{% endblock %}
{% block main %}
<span id="message" class='message' onload='$(div#message).hide()'>{{message}}</span>
<div class='side-menu'>
    <h3>Account</h3>
    <ul>
        <li onClick='hideAll(); $("#settings").show()'>Settings</li>
        <li onClick='hideAll(); $("#picture").show()'>Picture</li>
    </ul>
</div>
<div id="settings" class='main-content'>
    <form name="accountForm" method='post' action=''>{% csrf_token %}
    <table ="table">
        {% for field in form %}
            <tr>
                <th>{{field.label}}</th>
            </tr>
            <tr>
                <td>{{field}}</td>
                <td class="error"2>
            {% for error in field.errors %}
              {{error}}<br />
            {% endfor %}
          </td>
            </tr>
        {% endfor %}
    </table>
    <p><a class="btn" onclick="document.accountForm.submit()">Save settings &raquo;</a></p>
    </form>
</div>
<div id="picture" class='main-content'>
    <strong>Picture</strong><br />
    <img src="{% gravatar_url request.user.email %}">
</div>
<div class='clear'></div>
{% endblock %}